# delimit;set mem 500m;set more off;set matsize 3000;use macoursetal_main;gen age_transfer1 = age_transfer+40;qui tab age_transfer1, gen(CEDAD);drop age_transfer1;/*** CONTROLS***/mac def controls6 "CEDAD* male s1age_head_05 s1hhsize_05 s1hhsz_undr5_05 s1hhsz_5_14_05 s1hhsz_15_24_05 s1hhsz_25_64_05                s1hhsz_65plus_05 s1male_head_05 ed_mom_inter ed_mom_miss                tvip_05_miss tvip_05_inter height_05_miss height_05_inter weight_05_miss weight_05_inter               bweight_miss bweight_inter MUN* com_haz_05 com_waz_05 com_tvip_05 com_control_05 com_vit_05 com_deworm_05 com_notvip";               gen ln_pce08 =ln(cons_tot_pc_08);gen ln_pce06 =ln(cons_tot_pc_06);gen ln_pce08sq = ln_pce08^2;gen ln_pce06sq = ln_pce06^2;  **** 2008*****;**** 2008*****;**** 2008*****;**** TABLE WITH ITT EFFECT, with controls****;foreach x of varlist propfood_08  prstap_f_08 pranimalprot_f_08 prfruitveg_f_08              a3lapiz_08 a3stories_08  nrhourread_08  e1bp3_toy              weighted_08 vitamiron_08 s4p7_parasite_i_08 s4p39_daysbed_i_08              a13cesd_08 e5home_08              {;regress `x' T $controls6 if sample08==1, cluster(unique_05);outreg2 T using inputs_jul0711_08, se excel append;};**** TABLE WITH ITT EFFECT, with controls and controlling for LOG AND LOG SQ consumption****;foreach x of varlist propfood_08  prstap_f_08 pranimalprot_f_08 prfruitveg_f_08              a3lapiz_08 a3stories_08  nrhourread_08  e1bp3_toy              weighted_08 vitamiron_08 s4p7_parasite_i_08 s4p39_daysbed_i_08              a13cesd_08 e5home_08              {;regress `x' T $controls6 ln_pce08 ln_pce08sq if sample08==1, cluster(unique_05);outreg2 T using inputs_jul0711_08, se excel append;};**** 2006*****;**** 2006*****;**** 2006*****;**** TABLE WITH ITT EFFECT with controls****;foreach x of varlist propfood_06 prstap_f_06 pranimalprot_f_06 prfruitveg_f_06              a3lapiz_06 a3stories_06  nrhourread_06 a3toy6M              weighted_06 vitamiron_06 s4p7_parasite_i_06 s4p39_06             a13cesd_06 a14home_06              {;regress `x' T $controls6 if sample06==1, cluster(unique_05);outreg2 T using inputs_jul0711_06, se excel append;};**** 2008*****;**** 2008*****;**** 2008*****;**** BASIC TREATMENT VERSUS CONTROL***;foreach x of varlist propfood_08  prstap_f_08 pranimalprot_f_08 prfruitveg_f_08              a3lapiz_08 a3stories_08 nrhourread_08  e1bp3_toy              weighted_08 vitamiron_08 s4p7_parasite_i_08 s4p39_daysbed_i_08              a13cesd_08 e5home_08               {;regress `x' T $controls6 if inlist(itt_all_i,1,2) &  sample08==1, cluster(unique_05);outreg2 T using inputsT12_jul0711_08, se excel append;};**** 2006*****;**** 2006*****;**** 2006*****;**** BASIC TREATMENT VERSUS CONTROL***;foreach x of varlist propfood_06 prstap_f_06 pranimalprot_f_06 prfruitveg_f_06              a3lapiz_06 a3stories_06   nrhourread_06  a3toy6M              weighted_06 vitamiron_06 s4p7_parasite_i_06 s4p39_06             a13cesd_06 a14home_06              {;regress `x' T $controls6 if inlist(itt_all_i,1,2) &  sample06==1, cluster(unique_05);outreg2 T using inputsT12_jul0711_06, se excel append;};*** CALCULATE Z-SCORES FOR SUREST***;foreach var in      prstap_f_08 prstap_f_06 a13cesd_08 a13cesd_06  e5home_08  s4p39_daysbed_i_08 a14home_06  s4p39_06  {;replace `var' = `var'*-1;      };      foreach var in propfood_08  prstap_f_08 pranimalprot_f_08 prfruitveg_f_08              a3lapiz_08 a3stories_08  nrhourread_08 e1bp3_toy              weighted_08 vitamiron_08 s4p7_parasite_i_08 s4p39_daysbed_i_08              a13cesd_08 e5home_08    {;gen C`var' = `var' if T==0;egen mean_`var'=mean(C`var') ;egen sd_`var'=sd(C`var') ;gen z_`var'=(`var'-mean_`var')/sd_`var';drop mean_`var' sd_`var';};foreach var in propfood_06 prstap_f_06 pranimalprot_f_06 prfruitveg_f_06              a3lapiz_06 a3stories_06  nrhourread_06 a3toy6M              weighted_06 vitamiron_06 s4p7_parasite_i_06 s4p39_06             a13cesd_06 a14home_06   {;gen C`var' = `var' if T==0;egen mean_`var'=mean(C`var') ;egen sd_`var'=sd(C`var') ;gen z_`var'=(`var'-mean_`var')/sd_`var';drop mean_`var' sd_`var';};/*STANDARDIZED*/mac def C2008_vars1fz  "z_propfood_08  z_prstap_f_08  z_pranimalprot_f_08 z_prfruitveg_f_08";mac def C2008_vars2sz  "z_a3lapiz_08 z_a3stories_08  z_nrhourread_08 z_e1bp3_toy";mac def C2008_vars3hz  "z_weighted_08 z_vitamiron_08 z_s4p7_parasite_i_08 z_s4p39_daysbed_i_08";mac def C2008_vars4ez  "z_a13cesd_08 z_e5home_08  ";mac def Cvars_08z "$C2008_vars1fz $C2008_vars2sz $C2008_vars3hz $C2008_vars4ez";mac def C2006_vars1fz  "z_propfood_06 z_prstap_f_06  z_pranimalprot_f_06 z_prfruitveg_f_06";mac def C2006_vars2sz  "z_a3lapiz_06 z_a3stories_06  z_nrhourread_06 z_a3toy6M";mac def C2006_vars3hz  "z_weighted_06 z_vitamiron_06 z_s4p7_parasite_i_06 z_s4p39_06";mac def C2006_vars4ez  "z_a13cesd_06 z_a14home_06 ";mac def Cvars_06z "$C2006_vars1fz $C2006_vars2sz $C2006_vars3hz $C2006_vars4ez";/**** SMALL CORRECTION OF IMPOSSIBLE VALUE TO GUARANTEE CALC VAR-COVARIANCE***;replace a3toy6M=. if age_transfer== -26 & a3toy6M!=.;*//*STANDARDIZED VALUES*/gen Tmale = T*male;cap program drop _all;prog def suests;   qui suest  M1 M2 M3 M4 M5 M6 M7 M8 M9 M10 M11 M12 M13 M14 , cluster(unique_05) dir;   display "T  ALL  VARIABLES";   lincom ([M1_mean]T+[M2_mean]T+[M3_mean]T+[M4_mean]T+[M5_mean]T+[M6_mean]T+[M7_mean]T+[M8_mean]T+[M9_mean]T+[M10_mean]T+   [M11_mean]T+[M12_mean]T+2*[M13_mean]T+2*[M14_mean]T)/16;      display "T  FOOD VARIABLES";   lincom ([M1_mean]T+[M2_mean]T+[M3_mean]T+[M4_mean]T)/4;   display "T  STIMULUS VARIABLES";   lincom ([M5_mean]T+[M6_mean]T+[M7_mean]T+[M8_mean]T)/4;          display "T HEALTH VARIABLES";   lincom ([M10_mean]T+[M11_mean]T+[M12_mean]T+[M9_mean]T)/4;          display "T ENVIRONMENT VARIABLES";   lincom ([M14_mean]T+[M13_mean]T)/2;             end;log using analysis_inputs.log, replace;/*2008*//*CONTROLS 6*//* SURE */est clear;mac def count=1;foreach x of global Cvars_08z{;  qui regress `x'  T $controls6 if    sample08==1;  est store M$count;  mac def count=$count+1;};suests;/* SURE */est clear;mac def count=1;foreach x of global Cvars_08z{;  qui regress `x'  T $controls6 ln_pce08 ln_pce08sq if    sample08==1;  est store M$count;  mac def count=$count+1;};suests;/*2006*//*CONTROLS 6*//* SURE */est clear;mac def count=1;foreach x of global Cvars_06z{;  qui regress `x'  T $controls6 if    sample06==1;  est store M$count;  mac def count=$count+1;};suests;/*CONTROLS 6 with consumption*/ /* SURE */est clear;mac def count=1;foreach x of global Cvars_06z{;  qui regress `x'  T  $controls6 ln_pce06 ln_pce06sq if    sample06==1;  est store M$count;  mac def count=$count+1;};suests;**** BY TREATMENT - basico****;**** BY TREATMENT - basico****;**** BY TREATMENT - basico****;/* CONTROLS 6*//* SURE */est clear;mac def count=1;foreach x of global Cvars_08z{;  qui regress `x'  T  $controls6 if inlist(itt_all_i,1,2) &  sample08==1;  est store M$count;  mac def count=$count+1;};suests;/* 2006*//* SURE */est clear;mac def count=1;foreach x of global Cvars_06z{;  qui regress `x'  T  $controls6 if inlist(itt_all_i,1,2) &   sample06==1;  est store M$count;  mac def count=$count+1;};suests;log close